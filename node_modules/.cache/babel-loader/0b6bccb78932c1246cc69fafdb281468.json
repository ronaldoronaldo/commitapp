{"ast":null,"code":"import _classCallCheck from \"/home/rafael/Desktop/commitapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/rafael/Desktop/commitapp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/rafael/Desktop/commitapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/rafael/Desktop/commitapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/rafael/Desktop/commitapp/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/rafael/Desktop/commitapp/src/GithubHeatmap/GithubHeatmap.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport ReactTooltip from 'react-tooltip';\nimport GithubMonths from './GithubMonths';\nimport GithubTiles from './GithubTiles';\nimport './GithubHeatmap.scss';\nimport GithubTile from './GithubTile';\n\nvar GithubHeatmap =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(GithubHeatmap, _React$PureComponent);\n\n  function GithubHeatmap(props) {\n    var _this;\n\n    _classCallCheck(this, GithubHeatmap);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GithubHeatmap).call(this, props));\n    var today = new Date();\n\n    var _this$findThresholdDa = _this.findThresholdData(today.getFullYear(), today),\n        startDate = _this$findThresholdDa.startDate,\n        endDate = _this$findThresholdDa.endDate;\n\n    var totalYearContribution = _this.sumContributions(props.data, startDate, endDate);\n\n    _this.state = {\n      data: props.data,\n      year: today.getFullYear(),\n      startsAt: today.getMonth() + 1,\n      today: today,\n      startDate: startDate,\n      endDate: endDate,\n      totalYearContribution: totalYearContribution\n    };\n    return _this;\n  }\n\n  _createClass(GithubHeatmap, [{\n    key: \"sumContributions\",\n    value: function sumContributions(data, startDate, endDate) {\n      return _.reduce(data, function (sum, row) {\n        var rowData = new Date(row.date);\n        rowData.setHours(0, 0, 0, 0);\n\n        if (rowData >= startDate && rowData <= endDate) {\n          return sum + row.count;\n        }\n\n        return sum;\n      }, 0);\n    }\n  }, {\n    key: \"_findMinDate\",\n    value: function _findMinDate(data) {\n      var minRow = _.minBy(data, function (row) {\n        return new Date(row.date);\n      });\n\n      return new Date(minRow.date).getFullYear();\n    }\n  }, {\n    key: \"mountSelectYears\",\n    value: function mountSelectYears() {\n      var _this$state = this.state,\n          today = _this$state.today,\n          data = _this$state.data,\n          year = _this$state.year;\n\n      var minYear = this._findMinDate(data);\n\n      var options = [];\n\n      for (var i = today.getFullYear(); i >= minYear; i--) {\n        var yearButtonClass = 'year-button-class';\n\n        if (i === year) {\n          yearButtonClass += ' year-button-class-selected';\n        }\n\n        options.push(React.createElement(\"li\", {\n          className: yearButtonClass,\n          key: i,\n          onClick: this.changeYear.bind(this, i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"year-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, i)));\n      }\n\n      return React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, options);\n    }\n  }, {\n    key: \"changeYear\",\n    value: function changeYear(year) {\n      var startsAt = year === this.state.today.getFullYear() ? this.state.today.getMonth() + 1 : 0;\n\n      var _this$findThresholdDa2 = this.findThresholdData(year, this.state.today),\n          startDate = _this$findThresholdDa2.startDate,\n          endDate = _this$findThresholdDa2.endDate;\n\n      var totalYearContribution = this.sumContributions(this.state.data, startDate, endDate);\n      this.setState({\n        year: year,\n        startsAt: startsAt,\n        startDate: startDate,\n        endDate: endDate,\n        totalYearContribution: totalYearContribution\n      });\n    }\n  }, {\n    key: \"findThresholdData\",\n    value: function findThresholdData(year, today) {\n      var endDate, startDate;\n\n      if (year === today.getFullYear()) {\n        endDate = today;\n        startDate = new Date();\n        startDate.setDate(startDate.getDate() - 364 - startDate.getDay());\n      } else {\n        endDate = new Date(year, 11, 31);\n        startDate = new Date(year, 0, 1);\n        startDate.setDate(startDate.getDate() - startDate.getDay());\n      }\n\n      startDate.setHours(0, 0, 0, 0);\n      endDate.setHours(0, 0, 0, 0);\n      return {\n        startDate: startDate,\n        endDate: endDate\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          startsAt = _this$state2.startsAt,\n          data = _this$state2.data,\n          startDate = _this$state2.startDate,\n          endDate = _this$state2.endDate,\n          year = _this$state2.year,\n          today = _this$state2.today,\n          totalYearContribution = _this$state2.totalYearContribution;\n      var contributionYear = year === today.getFullYear() ? 'the last year' : year;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"github-heatmap-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"total-contributions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, totalYearContribution, \" contributions in \", contributionYear), React.createElement(\"div\", {\n        className: \"dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-secondary dropdown-toggle contribution-settings-button\",\n        type: \"button\",\n        id: \"dropdownMenuButton\",\n        \"data-toggle\": \"dropdown\",\n        \"aria-haspopup\": \"true\",\n        \"aria-expanded\": \"false\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Contribution settings\"), React.createElement(\"div\", {\n        className: \"dropdown-menu\",\n        \"aria-labelledby\": \"dropdownMenuButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"dropdown-item\",\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Private contributions\"), React.createElement(\"a\", {\n        className: \"dropdown-item\",\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Activity Overview\")))), React.createElement(\"div\", {\n        className: \"github-heatmap-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(ReactTooltip, {\n        key: \"tooltip-key-\".concat(year),\n        html: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(GithubMonths, {\n        startsAt: startsAt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(GithubTiles, {\n        data: data,\n        startDate: startDate,\n        endDate: endDate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"github-heatmap-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"learn-how-link\",\n        href: \"https://help.github.com/en/articles/why-are-my-contributions-not-showing-up-on-my-profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Learn how we count contributions\"), React.createElement(\"div\", {\n        className: \"legend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"legend-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Less \"), React.createElement(\"div\", {\n        className: \"legend-tiles\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(GithubTile, {\n        colorTone: \"nothing\",\n        description: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(GithubTile, {\n        colorTone: \"weak\",\n        description: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(GithubTile, {\n        colorTone: \"light\",\n        description: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(GithubTile, {\n        colorTone: \"normal\",\n        description: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(GithubTile, {\n        colorTone: \"dark\",\n        description: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"legend-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"More\")))), React.createElement(\"div\", {\n        className: \"github-heatmap-controls\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.mountSelectYears()));\n    }\n  }]);\n\n  return GithubHeatmap;\n}(React.PureComponent);\n\nGithubHeatmap.propTypes = {\n  data: PropTypes.array.isRequired\n};\nexport { GithubHeatmap as default };","map":{"version":3,"sources":["/home/rafael/Desktop/commitapp/src/GithubHeatmap/GithubHeatmap.jsx"],"names":["React","PropTypes","_","ReactTooltip","GithubMonths","GithubTiles","GithubTile","GithubHeatmap","props","today","Date","findThresholdData","getFullYear","startDate","endDate","totalYearContribution","sumContributions","data","state","year","startsAt","getMonth","reduce","sum","row","rowData","date","setHours","count","minRow","minBy","minYear","_findMinDate","options","i","yearButtonClass","push","changeYear","bind","setState","setDate","getDate","getDay","contributionYear","mountSelectYears","PureComponent","propTypes","array","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport ReactTooltip from 'react-tooltip';\nimport GithubMonths from './GithubMonths';\nimport GithubTiles from './GithubTiles';\nimport './GithubHeatmap.scss';\nimport GithubTile from './GithubTile';\n\nexport default class GithubHeatmap extends React.PureComponent {\n  static propTypes = {\n    data: PropTypes.array.isRequired\n  };\n\n  constructor(props){\n    super(props);\n    const today = new Date();\n    const { startDate, endDate } = this.findThresholdData(today.getFullYear(), today);\n    const totalYearContribution = this.sumContributions(props.data, startDate, endDate);\n    this.state = {\n      data: props.data,\n      year: today.getFullYear(),\n      startsAt: today.getMonth() + 1,\n      today,\n      startDate,\n      endDate,\n      totalYearContribution\n    }\n  }\n\n  sumContributions(data, startDate, endDate){\n    return _.reduce(data, function (sum, row) {\n      const rowData = new Date(row.date);\n      rowData.setHours(0, 0, 0, 0);\n      if (rowData >= startDate && rowData <= endDate){\n        return sum + row.count;\n      }\n      return sum;\n    }, 0);\n  }\n\n  _findMinDate(data){\n    const minRow = _.minBy(data, (row) => new Date(row.date));\n    return new Date(minRow.date).getFullYear();\n\n  }\n\n  mountSelectYears(){\n    const {today, data, year} = this.state;\n    const minYear = this._findMinDate(data);\n    let options = [];\n    for (let i = today.getFullYear(); i >= minYear; i--){\n      let yearButtonClass = 'year-button-class';\n      if(i === year){\n        yearButtonClass += ' year-button-class-selected';\n      }\n      options.push(<li className={yearButtonClass} key={i} onClick={this.changeYear.bind(this, i)}><span className=\"year-label\">{i}</span></li>)\n    }\n    return <ul>{options}</ul>\n  }\n\n  changeYear(year){\n    const startsAt = (year === this.state.today.getFullYear()) ? this.state.today.getMonth() + 1 : 0;\n    const {startDate, endDate} = this.findThresholdData(year, this.state.today);\n    const totalYearContribution = this.sumContributions(this.state.data, startDate, endDate);\n    this.setState({ year, startsAt, startDate, endDate, totalYearContribution});\n  }\n\n  findThresholdData(year, today){\n    let endDate, startDate;\n    if(year === today.getFullYear()){\n      endDate = today;\n      startDate = new Date();\n      startDate.setDate(startDate.getDate() - 364 - startDate.getDay());\n    }else{\n      endDate = new Date(year, 11, 31);\n      startDate = new Date(year, 0, 1);\n      startDate.setDate(startDate.getDate() - startDate.getDay());\n    }\n    startDate.setHours(0, 0, 0, 0);\n    endDate.setHours(0, 0, 0, 0);\n    return {startDate, endDate};\n  }\n\n  render(){\n    const { startsAt, data, startDate, endDate, year, today, totalYearContribution} = this.state;\n    const contributionYear = (year === today.getFullYear()) ? 'the last year' : year;\n    return (\n      <React.Fragment>\n          <div className=\"github-heatmap-header\">\n            <h2 className='total-contributions'>{totalYearContribution} contributions in {contributionYear}</h2>\n            <div className=\"dropdown\">\n              <button className=\"btn btn-secondary dropdown-toggle contribution-settings-button\" type=\"button\" id=\"dropdownMenuButton\"\n                      data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                Contribution settings\n              </button>\n              <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                <a className=\"dropdown-item\" href=\"#\">Private contributions</a>\n                <a className=\"dropdown-item\" href=\"#\">Activity Overview</a>\n              </div>\n            </div>\n          </div>\n        <div className='github-heatmap-box'>\n          <ReactTooltip key={`tooltip-key-${year}`} html/>\n\n          <GithubMonths startsAt={startsAt} />\n          <GithubTiles data={data} startDate={startDate} endDate={endDate}/>\n          <div className='github-heatmap-footer'>\n            <a className=\"learn-how-link\" href=\"https://help.github.com/en/articles/why-are-my-contributions-not-showing-up-on-my-profile\">Learn how we count contributions</a>\n              <div className=\"legend\">\n                <span className=\"legend-label\">Less </span>\n                  <div className=\"legend-tiles\">\n                    <GithubTile colorTone='nothing' description/>\n                    <GithubTile colorTone='weak' description/>\n                    <GithubTile colorTone='light' description/>\n                    <GithubTile colorTone='normal' description/>\n                    <GithubTile colorTone='dark' description/>\n                  </div>\n                <span className=\"legend-label\">More</span>\n              </div>\n          </div>\n        </div>\n        <div className='github-heatmap-controls'>\n          {this.mountSelectYears()}\n        </div>\n      </React.Fragment>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}